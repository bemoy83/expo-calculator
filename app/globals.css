@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* ============================================
     Material Design 3 Color System - Light Mode
     ============================================ */
  
  /* MD3 Primary Palette */
  --md-primary: 37 99 235;                    /* Primary color */
  --md-on-primary: 255 255 255;               /* Text/icon on primary */
  --md-primary-container: 219 234 254;         /* Primary container background */
  --md-on-primary-container: 15 23 42;         /* Text/icon on primary container */
  
  /* MD3 Secondary Palette */
  --md-secondary: 59 130 246;                 /* Secondary color */
  --md-on-secondary: 255 255 255;             /* Text/icon on secondary */
  --md-secondary-container: 191 219 254;        /* Secondary container */
  --md-on-secondary-container: 15 23 42;       /* Text/icon on secondary container */
  
  /* MD3 Tertiary Palette */
  --md-tertiary: 168 85 247;                  /* Tertiary color */
  --md-on-tertiary: 255 255 255;               /* Text/icon on tertiary */
  --md-tertiary-container: 233 213 255;        /* Tertiary container */
  --md-on-tertiary-container: 15 23 42;         /* Text/icon on tertiary container */
  
  /* MD3 Error Palette */
  --md-error: 116 0 6;                       /* Error color */
  --md-on-error: 255 255 255;                  /* Text/icon on error */
  --md-error-container: 207 44 39;           /* Error container background */
  --md-on-error-container: 255 255 255;          /* Text/icon on error container */
  
  /* MD3 Surface System */
  --md-surface: 247 250 251;                   /* Base surface color */
  --md-on-surface: 14 18 19;                    /* Text/icon on surface */
  --md-surface-variant: 218 228 231;           /* Surface variant */
  --md-on-surface-variant: 46 56 58;          /* Text/icon on surface variant */
  
  /* MD3 Surface Container Hierarchy */
  --md-surface-container-lowest: 255 255 255;
  --md-surface-container-low: 241 244 245;
  --md-surface-container: 230 232 234;
  --md-surface-container-high: 218 221 222;
  --md-surface-container-highest: 207 210 211;
  
  /* MD3 Outline System */
  --md-outline: 226 232 240;                   /* Outline color */
  --md-outline-variant: 241 245 249;           /* Outline variant (lighter) */
  
  /* MD3 Shape System (Border Radius) */
  --md-shape-corner-none: 0px;
  --md-shape-corner-extra-small: 4px;
  --md-shape-corner-small: 8px;
  --md-shape-corner-medium: 12px;
  --md-shape-corner-large: 16px;
  --md-shape-corner-extra-large: 28px;
  --md-shape-corner-full: 9999px;
  
  /* MD3 Elevation Overlay Opacities */
  --md-elevation-overlay-0: 0;
  --md-elevation-overlay-1: 0.05;
  --md-elevation-overlay-2: 0.07;
  --md-elevation-overlay-3: 0.08;
  --md-elevation-overlay-4: 0.09;
  --md-elevation-overlay-5: 0.10;
  --md-elevation-overlay-8: 0.12;
  --md-elevation-overlay-12: 0.14;
  --md-elevation-overlay-16: 0.15;
  --md-elevation-overlay-24: 0.16;
  
  /* MD3 Disabled State Overlay */
  --md-disabled-overlay: 0.12;                    /* 12% overlay for disabled containers */
  
  /* ============================================
     Custom Tokens (Not in MD3 Spec)
     ============================================ */
  
  --warning: 245 158 11;                      /* Custom warning color (no MD3 equivalent) */
  --success: 22 163 74;                       /* Custom success color (no MD3 equivalent) */
  --success-foreground: 15 23 42;             /* Text on success background */
  --overlay: 0 0 0;                           /* Overlay/scrim color (convenience token) */
  
  /* Custom Border Radius (not in MD3 standard sizes) */
  --radius-sm: 6px;                           /* Between extra-small (4px) and small (8px) */
  --radius-2xl: 20px;                         /* Between large (16px) and extra-large (28px) */
}

.dark {
  /* ============================================
     Material Design 3 Color System - Dark Mode
     ============================================ */
  
  /* MD3 Primary Palette - Dark Mode */
  --md-primary: 147 197 253;                   /* Lighter blue for dark mode */
  --md-on-primary: 15 23 42;                   /* Dark text on primary */
  --md-primary-container: 30 58 138;           /* Darker blue container */
  --md-on-primary-container: 219 234 254;     /* Light text on container */
  
  /* MD3 Secondary Palette - Dark Mode */
  --md-secondary: 147 197 253;                 /* Secondary color */
  --md-on-secondary: 15 23 42;                 /* Dark text on secondary */
  --md-secondary-container: 30 58 138;         /* Secondary container */
  --md-on-secondary-container: 219 234 254;     /* Light text on container */
  
  /* MD3 Tertiary Palette - Dark Mode */
  --md-tertiary: 168 85 247;                   /* Tertiary color */
  --md-on-tertiary: 255 255 255;               /* White text on tertiary */
  --md-tertiary-container: 91 33 182;          /* Tertiary container */
  --md-on-tertiary-container: 233 213 255;     /* Light text on container */
  
  /* MD3 Error Palette - Dark Mode */
  --md-error: 207 102 121;                     /* Material error (desaturated red) */
  --md-on-error: 255 255 255;                   /* White text on error */
  --md-error-container: 127 29 29;             /* Error container background */
  --md-on-error-container: 255 218 218;         /* Light text on error container */
  
  /* MD3 Surface System - Dark Mode */
  --md-surface: 16 20 21;                      /* Base surface - #121212 */
  --md-on-surface: 255 255 255;                 /* White text on surface */
  --md-surface-variant:63 72 75;              /* Surface variant */
  --md-on-surface-variant: 212 222 225;        /* Text/icon on surface variant */
  
  /* MD3 Surface Container Hierarchy - Dark Mode */
  --md-surface-container-lowest: 5 8 9;     /* Lowest - #121212 */
  --md-surface-container-low: 26 30 31;        /* Low - #171717 */
  --md-surface-container: 37 40 42;             /* Default - #1E1E1E */
  --md-surface-container-high: 47 51 52;        /* High - slightly lighter */
  --md-surface-container-highest: 58 62 63;     /* Highest - lightest */
  
  /* MD3 Outline System - Dark Mode */
  --md-outline: 255 255 255;                   /* White for dark mode (opacity applied via CSS) */
  --md-outline-variant: 255 255 255;           /* White variant (lower opacity applied via CSS) */
  
  /* MD3 Shape System (same as light mode) */
  --md-shape-corner-none: 0px;
  --md-shape-corner-extra-small: 4px;
  --md-shape-corner-small: 8px;
  --md-shape-corner-medium: 12px;
  --md-shape-corner-large: 16px;
  --md-shape-corner-extra-large: 28px;
  --md-shape-corner-full: 9999px;
  
  /* MD3 Elevation Overlay Opacities (same as light mode) */
  --md-elevation-overlay-0: 0;
  --md-elevation-overlay-1: 0.05;
  --md-elevation-overlay-2: 0.07;
  --md-elevation-overlay-3: 0.08;
  --md-elevation-overlay-4: 0.09;
  --md-elevation-overlay-5: 0.10;
  --md-elevation-overlay-8: 0.12;
  --md-elevation-overlay-12: 0.14;
  --md-elevation-overlay-16: 0.15;
  --md-elevation-overlay-24: 0.16;
  
  /* MD3 Disabled State Overlay (same as light mode) */
  --md-disabled-overlay: 0.12;                    /* 12% overlay for disabled containers */
  
  /* ============================================
     Custom Tokens (Not in MD3 Spec)
     ============================================ */
  
  --warning: 255 193 7;                        /* Custom warning color (no MD3 equivalent) */
  --success: 76 175 80;                        /* Custom success color (no MD3 equivalent) */
  --success-foreground: 255 255 255;           /* Text on success background */
  --overlay: 0 0 0;                            /* Overlay/scrim color (convenience token) */
  
  /* Custom Border Radius (not in MD3 standard sizes) */
  --radius-sm: 6px;                            /* Between extra-small (4px) and small (8px) */
  --radius-2xl: 20px;                          /* Between large (16px) and extra-large (28px) */
}

@layer base {
  body {
    @apply bg-md-surface text-md-on-surface;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
      'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
      sans-serif;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
  
  /* Screen reader only - visually hidden but accessible to assistive technologies */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }
  
  .sr-only:focus,
  .sr-only:active {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }
  
  /* Smooth transitions for interactive elements */
  .transition-smooth {
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Material Design dark theme border opacity */
  /* Override border color to use 12% opacity white in dark mode */
  .dark .border-border {
    border-color: rgb(255 255 255 / 0.12);
  }
  
  /* Dark mode border utilities - MD3 compliant */
  /* Standard MD3 dark mode borders use white at 12% opacity */
  .dark .border-md-outline {
    border-color: rgb(255 255 255 / 0.12);  /* 12% white - standard MD3 dark mode border */
  }
  
  .dark .border-md-outline-variant {
    border-color: rgb(255 255 255 / 0.08);   /* 8% white - subtle variant */
  }
  
  /* Override opacity modifiers in dark mode for consistency */
  /* Replace arbitrary opacity values with MD3-standard opacities */
  .dark .border-md-outline\/50 {
    border-color: rgb(255 255 255 / 0.12) !important;  /* Use standard 12% instead of 50% */
  }
  
  .dark .border-md-outline\/30 {
    border-color: rgb(255 255 255 / 0.08) !important;  /* Use variant opacity */
  }
  
  /* Subtle input borders - hairline 1px with appropriate opacity */
  .border-input {
    border-width: 1px;
    border-color: rgb(var(--md-outline) / 0.25);
  }
  
  .dark .border-input {
    border-color: rgb(255 255 255 / 0.15);  /* 15% white for better input visibility */
  }
  
  /* Material Design hover overlay system */
  /* Dark theme: 8% white overlay, Light theme: 4% black overlay */
  .hover-overlay {
    position: relative;
  }
  
  /* Dark theme hover overlay */
  .dark .hover-overlay:hover::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, 0.08);
    pointer-events: none;
    border-radius: inherit;
    z-index: 1;
  }
  
  /* Light theme hover overlay */
  .hover-overlay:hover::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.04);
    pointer-events: none;
    border-radius: inherit;
    z-index: 1;
  }
  
  /* Ensure content is above hover overlay */
  .hover-overlay > * {
    position: relative;
    z-index: 2;
  }
  
  /* Pressed state overlay (12% opacity) */
  .dark .hover-overlay:active::after {
    background: rgba(255, 255, 255, 0.12);
  }
  
  .hover-overlay:active::after {
    background: rgba(0, 0, 0, 0.08);
  }
  
  /* Material Design 3 Disabled State Overlay System */
  /* Dark theme: 12% white overlay, Light theme: 12% black overlay */
  .disabled-overlay {
    position: relative;
  }
  
  /* Dark theme disabled overlay */
  .dark .disabled-overlay:disabled::after,
  .dark .disabled-overlay[disabled]::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(255, 255, 255, var(--md-disabled-overlay));
    pointer-events: none;
    border-radius: inherit;
    z-index: 1; /* Above background, below content */
  }
  
  /* Light theme disabled overlay */
  .disabled-overlay:disabled::after,
  .disabled-overlay[disabled]::after {
    content: '';
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, var(--md-disabled-overlay));
    pointer-events: none;
    border-radius: inherit;
    z-index: 1; /* Above background, below content */
  }
  
  /* Base disabled state */
  .disabled-overlay:disabled,
  .disabled-overlay[disabled] {
    cursor: not-allowed;
  }
  
  /* Enhanced disabled styling for form inputs */
  /* Provides multiple visual cues: background, border, text opacity, and overlay */
  input.disabled-overlay:disabled,
  textarea.disabled-overlay:disabled,
  select.disabled-overlay:disabled,
  input.disabled-overlay[disabled],
  textarea.disabled-overlay[disabled],
  select.disabled-overlay[disabled] {
    /* Text opacity (38% per MD3) */
    color: color-mix(in srgb, currentColor 38%, transparent);
    position: relative;
    z-index: 2; /* Above overlay */
    
    /* Background change - use surface container for better contrast */
    background-color: rgb(var(--md-surface-container-low)) !important;
    
    /* Border styling - subtle border matching standard border opacity */
    /* Light mode: use outline-variant at 12% opacity (subtle, MD3-compliant) */
    border-color: rgb(var(--md-outline-variant) / 0.12) !important;
    
    /* Remove interactive states */
    pointer-events: none;
  }
  
  /* Dark mode specific: even more subtle border for disabled */
  .dark input.disabled-overlay:disabled,
  .dark textarea.disabled-overlay:disabled,
  .dark select.disabled-overlay:disabled,
  .dark input.disabled-overlay[disabled],
  .dark textarea.disabled-overlay[disabled],
  .dark select.disabled-overlay[disabled] {
    border-color: rgb(255 255 255 / 0.08) !important;  /* 8% white - more subtle than standard 12% */
  }
  
  /* Placeholder opacity */
  input.disabled-overlay:disabled::placeholder,
  textarea.disabled-overlay:disabled::placeholder,
  select.disabled-overlay:disabled::placeholder,
  input.disabled-overlay[disabled]::placeholder,
  textarea.disabled-overlay[disabled]::placeholder,
  select.disabled-overlay[disabled]::placeholder {
    opacity: 0.38;
  }
  
  /* Fallback for browsers without color-mix support: use opacity on element */
  /* Ensures overlay is separate from background for proper visual differentiation */
  @supports not (color: color-mix(in srgb, currentColor 38%, transparent)) {
    input.disabled-overlay:disabled,
    textarea.disabled-overlay:disabled,
    select.disabled-overlay:disabled,
    input.disabled-overlay[disabled],
    textarea.disabled-overlay[disabled],
    select.disabled-overlay[disabled] {
      opacity: 0.38;
      /* Still apply background and border changes for visual differentiation */
      background-color: rgb(var(--md-surface-container-low)) !important;
      border-color: rgb(var(--md-outline-variant) / 0.12) !important;
    }
    
    /* Dark mode fallback */
    .dark input.disabled-overlay:disabled,
    .dark textarea.disabled-overlay:disabled,
    .dark select.disabled-overlay:disabled,
    .dark input.disabled-overlay[disabled],
    .dark textarea.disabled-overlay[disabled],
    .dark select.disabled-overlay[disabled] {
      border-color: rgb(255 255 255 / 0.08) !important;
    }
  }
  
  /* For elements with children (like buttons), apply opacity to children */
  .disabled-overlay:disabled > *:not(input):not(textarea):not(select),
  .disabled-overlay[disabled] > *:not(input):not(textarea):not(select) {
    opacity: 0.38;
    position: relative;
    z-index: 2; /* Above overlay */
  }
}

/* =====================================================
   MD3 Elevation Utilities
   - Shadow + Overlay unified
   - Outside Tailwind @layer utilities
   - Safe / deterministic / future-proof
   ===================================================== */

/* ---------------------------
   SHADOW TOKENS (easy tuning)
   --------------------------- */
   :root {
    --shadow-0: none;
  
    --shadow-1: 0px 6px 12px rgba(0, 0, 0, 0.10),
                0px 2px 4px rgba(0, 0, 0, 0.06);
  
    --shadow-2: 0px 10px 20px rgba(0, 0, 0, 0.12),
                0px 4px 6px rgba(0, 0, 0, 0.06);
  
    --shadow-3: 0px 14px 28px rgba(0, 0, 0, 0.14),
                0px 6px 10px rgba(0, 0, 0, 0.08);
  
    --shadow-4: 0px 18px 36px rgba(0, 0, 0, 0.16),
                0px 8px 14px rgba(0, 0, 0, 0.10);
  
    --shadow-5: 0px 24px 48px rgba(0, 0, 0, 0.18),
                0px 10px 18px rgba(0, 0, 0, 0.10);
  
    --shadow-8: 0px 36px 60px rgba(0, 0, 0, 0.20),
                0px 14px 28px rgba(0, 0, 0, 0.12);
  
    --shadow-12: 0px 48px 80px rgba(0, 0, 0, 0.22),
                 0px 18px 36px rgba(0, 0, 0, 0.14);
  
    --shadow-16: 0px 60px 100px rgba(0, 0, 0, 0.24),
                 0px 22px 44px rgba(0, 0, 0, 0.16);
  
    --shadow-24: 0px 80px 140px rgba(0, 0, 0, 0.26),
                 0px 30px 60px rgba(0, 0, 0, 0.18);
  }
  
  /* ---------------------------
     BASE MECHANICS
     --------------------------- */
   /* only add positioning when the element is NOT already positioned */
.dark [class^="elevation-"]:not(.absolute):not(.fixed):not(.sticky),
.dark [class*=" elevation-"]:not(.absolute):not(.fixed):not(.sticky) {
  position: relative;
}

     
     [class^="elevation-"]::before,
     [class*=" elevation-"]::before {
       content: "";
       position: absolute;
       inset: 0;
       border-radius: inherit;
       pointer-events: none;
       z-index: 1;
     }
  
  /* ---------------------------
     SHADOW APPLICATION
     --------------------------- */
  .elevation-0  { box-shadow: var(--shadow-0)  !important; }
  .elevation-1  { box-shadow: var(--shadow-1)  !important; }
  .elevation-2  { box-shadow: var(--shadow-2)  !important; }
  .elevation-3  { box-shadow: var(--shadow-3)  !important; }
  .elevation-4  { box-shadow: var(--shadow-4)  !important; }
  .elevation-5  { box-shadow: var(--shadow-5)  !important; }
  .elevation-8  { box-shadow: var(--shadow-8)  !important; }
  .elevation-12 { box-shadow: var(--shadow-12) !important; }
  .elevation-16 { box-shadow: var(--shadow-16) !important; }
  .elevation-24 { box-shadow: var(--shadow-24) !important; }
  
  /* ---------------------------
     DARK MODE OVERLAY TOKENS
     (MD3 perceptual elevation)
     --------------------------- */
  /*:root {
    --overlay-1:  0.05;
    --overlay-2:  0.07;
    --overlay-3:  0.08;
    --overlay-4:  0.09;
    --overlay-5:  0.10;
    --overlay-8:  0.12;
    --overlay-12: 0.14;
    --overlay-16: 0.16;
    --overlay-24: 0.18;
  }
  
  /* overlay base */
  /*.dark [class^="elevation-"]::before,
  .dark [class*=" elevation-"]::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
    z-index: 0;
  }
  
  /* overlay opacity per level */
  /*.dark .elevation-1::before  { background: rgba(255,255,255,var(--overlay-1)); }
  .dark .elevation-2::before  { background: rgba(255,255,255,var(--overlay-2)); }
  .dark .elevation-3::before  { background: rgba(255,255,255,var(--overlay-3)); }
  .dark .elevation-4::before  { background: rgba(255,255,255,var(--overlay-4)); }
  .dark .elevation-5::before  { background: rgba(255,255,255,var(--overlay-5)); }
  .dark .elevation-8::before  { background: rgba(255,255,255,var(--overlay-8)); }
  .dark .elevation-12::before { background: rgba(255,255,255,var(--overlay-12)); }
  .dark .elevation-16::before { background: rgba(255,255,255,var(--overlay-16)); }
  .dark .elevation-24::before { background: rgba(255,255,255,var(--overlay-24)); }
  
  /* ---------------------------
     POSITION SAFETY (keep)
     --------------------------- */
  .elevation-0.sticky,
  .elevation-1.sticky,
  .elevation-2.sticky,
  .elevation-3.sticky,
  .elevation-4.sticky,
  .elevation-5.sticky,
  .elevation-8.sticky,
  .elevation-12.sticky,
  .elevation-16.sticky,
  .elevation-24.sticky {
    position: sticky;
  }
  
  .elevation-0.fixed,
  .elevation-1.fixed,
  .elevation-2.fixed,
  .elevation-3.fixed,
  .elevation-4.fixed,
  .elevation-5.fixed,
  .elevation-8.fixed,
  .elevation-12.fixed,
  .elevation-16.fixed,
  .elevation-24.fixed {
    position: fixed;
  }
  